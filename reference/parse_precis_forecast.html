<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Parse local BOM daily précis forecast XML file(s) for select towns — parse_precis_forecast • bomrang</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Parse local BOM daily précis forecast XML file(s) for select towns — parse_precis_forecast" />
<meta property="og:description" content="Parse local BOM daily précis forecast XML file(s) and
return a data frame of the seven-day town forecasts for a specified state or
territory or all Australia." />
<meta property="og:image" content="https://docs.ropensci.org/bomrang/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bomrang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bomrang.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/use_case.html">bomrang Use Case</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/bomrang/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parse local BOM daily précis forecast XML file(s) for select towns</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/bomrang/blob/master/R/parse_precis_forecast.R'><code>R/parse_precis_forecast.R</code></a></small>
    <div class="hidden name"><code>parse_precis_forecast.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parse local <acronym>BOM</acronym> daily précis forecast <acronym>XML</acronym> file(s) and
return a data frame of the seven-day town forecasts for a specified state or
territory or all Australia.</p>
    </div>

    <pre class="usage"><span class='fu'>parse_precis_forecast</span><span class='op'>(</span><span class='va'>state</span>, <span class='va'>filepath</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>state</th>
      <td><p>Required value of an Australian state or territory as full name
or postal code.  Fuzzy string matching via <code><a href='https://rdrr.io/r/base/agrep.html'>agrep</a></code> is
done.</p></td>
    </tr>
    <tr>
      <th>filepath</th>
      <td><p>A string providing the directory location of the précis
file(s) to parse. See Details for more.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code> of Australia <acronym>BOM</acronym> précis
seven day forecasts for <acronym>BOM</acronym> selected towns.  For full details of
fields and units returned see Appendix 2 in the <a href='https://CRAN.R-project.org/package=bomrang'><span class="pkg">bomrang</span></a> vignette,
use<br />
<code><a href='../articles/bomrang.html'>vignette("bomrang", package = "bomrang")</a></code> to view.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Allowed state and territory postal codes, only one state per request
or all using <code>AUS</code>.</p><dl>
<dt>ACT</dt><dd><p>Australian Capital Territory (will return NSW)</p></dd>
<dt>NSW</dt><dd><p>New South Wales</p></dd>
<dt>NT</dt><dd><p>Northern Territory</p></dd>
<dt>QLD</dt><dd><p>Queensland</p></dd>
<dt>SA</dt><dd><p>South Australia</p></dd>
<dt>TAS</dt><dd><p>Tasmania</p></dd>
<dt>VIC</dt><dd><p>Victoria</p></dd>
<dt>WA</dt><dd><p>Western Australia</p></dd>
<dt>AUS</dt><dd><p>Australia, returns forecast for all states, NT and ACT</p></dd>

</dl>

<p>The <var>filepath</var> argument will only accept a directory where files
are located for parsing. DO NOT supply the full path including the file name.
This function will only parse the requested state or all of Australia in the
same fashion as <code><a href='get_precis_forecast.html'>get_precis_forecast</a></code>, provided that the files
are all present in the directory.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Forecast data come from Australian Bureau of Meteorology (<acronym>BOM</acronym>)
Weather Data Services <br />
<a href='http://www.bom.gov.au/catalogue/data-feeds.shtml'>http://www.bom.gov.au/catalogue/data-feeds.shtml</a></p>
<p>Location data and other metadata for towns come from
the <acronym>BOM</acronym> anonymous <acronym>FTP</acronym> server with spatial data <br />
<a href='ftp://ftp.bom.gov.au/anon/home/adfd/spatial/'>ftp://ftp.bom.gov.au/anon/home/adfd/spatial/</a>, specifically the
<acronym>DBF</acronym> file portion of a shapefile, <br />
<a href='ftp://ftp.bom.gov.au/anon/home/adfd/spatial/IDM00013.dbf'>ftp://ftp.bom.gov.au/anon/home/adfd/spatial/IDM00013.dbf</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='get_precis_forecast.html'>get_precis_forecast</a></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Adam H. Sparks, <a href='mailto:adamhsparks@gmail.com'>adamhsparks@gmail.com</a> and Keith Pembleton,
<a href='mailto:keith.pembleton@usq.edu.au'>keith.pembleton@usq.edu.au</a> and Paul Melloy,
<a href='mailto:paul@melloy.com.au'>paul@melloy.com.au</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># parse the short forecast for Queensland</span>

<span class='co'># download to tempfile() using basename() to keep original name</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span>url <span class='op'>=</span> <span class='st'>"ftp://ftp.bom.gov.au/anon/gen/fwo/IDQ11295.xml"</span>,
              destfile <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>,
              <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span><span class='op'>(</span><span class='st'>"ftp://ftp.bom.gov.au/anon/gen/fwo/IDQ11295.xml"</span><span class='op'>)</span><span class='op'>)</span>,
              mode <span class='op'>=</span> <span class='st'>"wb"</span><span class='op'>)</span>

<span class='va'>BOM_forecast</span> <span class='op'>&lt;-</span> <span class='fu'>parse_precis_forecast</span><span class='op'>(</span>state <span class='op'>=</span> <span class='st'>"QLD"</span>,
                                      filepath <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>BOM_forecast</span>
</div><div class='output co'>#&gt;      index product_id state         town       aac       lat      lon elev
#&gt;   1:     0   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   2:     1   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   3:     2   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   4:     3   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   5:     4   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;  ---                                                                      
#&gt; 787:     2   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 788:     3   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 789:     4   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 790:     5   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 791:     6   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt;         start_time_local end_time_local utc_offset      start_time_utc
#&gt;   1: 2020-12-15 05:00:00     2020-12-16      10:00 2020-12-14 19:00:00
#&gt;   2: 2020-12-16 00:00:00     2020-12-17      10:00 2020-12-15 14:00:00
#&gt;   3: 2020-12-17 00:00:00     2020-12-18      10:00 2020-12-16 14:00:00
#&gt;   4: 2020-12-18 00:00:00     2020-12-19      10:00 2020-12-17 14:00:00
#&gt;   5: 2020-12-19 00:00:00     2020-12-20      10:00 2020-12-18 14:00:00
#&gt;  ---                                                                  
#&gt; 787: 2020-12-17 00:00:00     2020-12-18      10:00 2020-12-16 14:00:00
#&gt; 788: 2020-12-18 00:00:00     2020-12-19      10:00 2020-12-17 14:00:00
#&gt; 789: 2020-12-19 00:00:00     2020-12-20      10:00 2020-12-18 14:00:00
#&gt; 790: 2020-12-20 00:00:00     2020-12-21      10:00 2020-12-19 14:00:00
#&gt; 791: 2020-12-21 00:00:00     2020-12-22      10:00 2020-12-20 14:00:00
#&gt;             end_time_utc minimum_temperature maximum_temperature
#&gt;   1: 2020-12-15 14:00:00                  NA                  30
#&gt;   2: 2020-12-16 14:00:00                  23                  30
#&gt;   3: 2020-12-17 14:00:00                  24                  29
#&gt;   4: 2020-12-18 14:00:00                  24                  30
#&gt;   5: 2020-12-19 14:00:00                  24                  31
#&gt;  ---                                                            
#&gt; 787: 2020-12-17 14:00:00                  26                  31
#&gt; 788: 2020-12-18 14:00:00                  26                  31
#&gt; 789: 2020-12-19 14:00:00                  25                  31
#&gt; 790: 2020-12-20 14:00:00                  26                  31
#&gt; 791: 2020-12-21 14:00:00                  26                  31
#&gt;      lower_precipitation_limit upper_precipitation_limit           precis
#&gt;   1:                         3                        15   Shower or two.
#&gt;   2:                         4                        15         Showers.
#&gt;   3:                         6                        15   Shower or two.
#&gt;   4:                         2                         6   Shower or two.
#&gt;   5:                         2                         8   Shower or two.
#&gt;  ---                                                                     
#&gt; 787:                        NA                        NA   Partly cloudy.
#&gt; 788:                        NA                        NA   Partly cloudy.
#&gt; 789:                         0                         1   Partly cloudy.
#&gt; 790:                         0                         3 Possible shower.
#&gt; 791:                         0                         2 Possible shower.
#&gt;      probability_of_precipitation
#&gt;   1:                           60
#&gt;   2:                           80
#&gt;   3:                           70
#&gt;   4:                           60
#&gt;   5:                           60
#&gt;  ---                             
#&gt; 787:                           20
#&gt; 788:                           10
#&gt; 789:                           30
#&gt; 790:                           40
#&gt; 791:                           40</div><div class='input'><span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Adam H. Sparks, Jonathan Carroll, James Goldie, Dean Marchiori, Paul Melloy, Mark Padgham, Hugh Parsonage, Keith Pembleton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'facca3867b59b88ba642023231b07134',
    indexName: 'bomrang',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


